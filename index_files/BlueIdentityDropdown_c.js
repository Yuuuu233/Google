var Identity=Identity||{};Identity.headerAuthenticate=function(n,t){Identity.headerLoginMode!=0&&Identity.popupAuthenticate(n,"","EXPLICIT_P")||(_w.location.href=t)},function(){function k(n,t,i){if(n&&t){var r=n.className;i?r.indexOf(t)==-1&&(r=r.concat(" ",t)):r=r.replace(t,"");n.className=r}}function g(n){n[1]!=="login"&&y(!1)}var u=_ge("id_h"),f=_ge("id_l"),i=_ge("id_d"),r=!1,s=!1,h=Identity.hdrClk,n=sj_gx(),c=!1,p="keyup",e="click",o="touchstart",l="focusChange",a=function(){var u,o,f,l;if(!r){r=!0;var a=i.getAttribute("_iid"),e="",t="testhooks=1";location.href.indexOf(t)>0&&(e="&"+t);u="";o="loginmode=1";Identity.headerLoginMode==1&&(u="&"+o);f="";t="idtest=windows_live_id";location.href.indexOf(t)>0&&(f="&"+t);l="/Identity/Dropdown?n=1&IID="+a+"&IG="+_G.IG+e+f+u+"&ru="+encodeURIComponent(location.href);n.open("GET",l,!0);n.onreadystatechange=function(){n.readyState==4&&n.status==200&&n.responseText?(i.innerHTML=n.responseText,s=!0,c=!1,h!=null&&w(h),sj_evt.fire("id:refreshed")):n.readyState==4&&(r=!1,s=!1)};n.send(null)}};a();var w=function(n){if(!r||!s){h=n;a(n);return}var t=u.className.indexOf("b_idOpen")<0;y(t);sj_sp(n)},v=function(n){sj_sp(n)},y=function(n){k(u,"b_idOpen",n);n?(d(),sj_evt.fire(l,u),sj_evt.fire("onPopTR","login"),sj_be(_d,e,t),sj_be(_d,o,t),sj_be(_d,p,b,!0),sj_evt.bind(l,t)):(sj_ue(_d,e,t),sj_ue(_d,o,t),sj_ue(_d,p,b),sj_evt.unbind(l,t))},d=function(){var o,i,n,t,r,u,f,e;if(!c&&(c=!0,o=_ge("b_idProviders"),o)){for(i=o.children,n=0,t=0;t<i.length;t++)r=0,u=i[t].getElementsByClassName("id_name"),u&&u.length>0&&(r+=u[0].clientWidth),f=i[t].getElementsByClassName("id_link_text"),f&&f.length>0&&(r+=f[0].clientWidth),n=Math.max(n,r);n+=84;e=_ge("id_d");e&&n>e.clientWidth&&(e.style.width=n+"px")}},b=function(n){var r=n.which||n.keyCode;if(r==27){t();f.focus();return}if(r==9&&!i.contains(sj_et(n))){t();return}},t=function(){y(!1)};u&&sj_be(u,"mouseover",a);f&&sj_be(f,e,w);i&&sj_be(i,e,v);f&&sj_be(f,o,v);i&&sj_be(i,o,v);sj_evt.bind("wl:auth",function(){r=!1},1);sj_evt.bind("aad:signedin",function(){r=!1},1);sj_evt.bind("aad:signedout",function(){r=!1},1);sj_evt.bind("onPopTR",g)}()